<%# Inspired from https://github.com/projectcalico/calico-containers/blob/master/docs/CalicoAsService.md -%>
[Unit]
Description=Calico libnetwork service
After=docker.service etcd2.service
Requires=docker.service etcd2.service

[Service]
ExecStartPre=-/usr/bin/docker rm -f calico-libnetwork
ExecStart=/usr/bin/docker run --privileged --net=host \
 -v /run/docker/plugins:/run/docker/plugins \
 --name=calico-libnetwork \
 -e ETCD_AUTHORITY=localhost:2379 \
 calico/node-libnetwork:v0.8.0  <%# Pending resolution of https://github.com/projectcalico/calico-containers/issues/966 %>
ExecStop=-/usr/bin/docker stop calico-libnetwork

[Install]
WantedBy=multi-user.target
